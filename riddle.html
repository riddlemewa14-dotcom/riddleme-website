<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Riddle.Me - Open in App</title>
  
  <!-- App Store Smart Banner (iOS) -->
  <meta name="apple-itunes-app" content="app-id=YOUR_APP_ID">
  
  <!-- Open Graph -->
  <meta property="og:title" content="Riddle.Me Challenge">
  <meta property="og:description" content="Can you solve this riddle? Open in Riddle.Me app!">
  <meta property="og:image" content="https://riddleme.app/og-image.png">
  <meta property="og:url" content="https://riddleme.app">
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #8B5CF6 0%, #6D28D9 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .container {
      background: white;
      border-radius: 24px;
      padding: 40px;
      max-width: 400px;
      text-align: center;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    .logo { font-size: 64px; margin-bottom: 20px; }
    h1 { color: #1F2937; margin-bottom: 10px; font-size: 28px; }
    p { color: #6B7280; margin-bottom: 30px; line-height: 1.6; }
    .btn {
      display: block;
      background: #8B5CF6;
      color: white;
      padding: 16px 32px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 600;
      font-size: 18px;
      margin-bottom: 15px;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(139, 92, 246, 0.4);
    }
    .btn-secondary {
      background: #F3F4F6;
      color: #4B5563;
    }
    .btn-secondary:hover {
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    .stores {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 20px;
    }
    .store-btn {
      display: flex;
      align-items: center;
      gap: 8px;
      background: #1F2937;
      color: white;
      padding: 12px 20px;
      border-radius: 12px;
      text-decoration: none;
      font-size: 14px;
    }
    .store-btn:hover { background: #374151; }
    .loading {
      color: #9CA3AF;
      font-size: 14px;
      margin-top: 20px;
    }
    .spinner {
      border: 3px solid #E5E7EB;
      border-top: 3px solid #8B5CF6;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      animation: spin 1s linear infinite;
      margin: 0 auto 10px;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo">üß©</div>
    <h1>Riddle.Me</h1>
    <p id="message">Opening in Riddle.Me app...</p>
    
    <div id="loading" class="loading">
      <div class="spinner"></div>
      Redirecting...
    </div>
    
    <div id="buttons" style="display: none;">
      <a href="#" id="openApp" class="btn">Open in App</a>
      <p style="color: #9CA3AF; margin: 15px 0;">Don't have the app?</p>
      <div class="stores">
        <a href="https://apps.apple.com/app/riddleme/idYOUR_APP_ID" class="store-btn">
          üçé App Store
        </a>
        <a href="https://play.google.com/store/apps/details?id=com.riddleme.app" class="store-btn">
          ü§ñ Play Store
        </a>
      </div>
    </div>
  </div>

  <script>
    // Get the path from URL
    const path = window.location.pathname;
    const search = window.location.search;
    
    // Build the app deep link
    const appScheme = 'riddleme://';
    let deepLink = appScheme + path.substring(1) + search; // Remove leading slash
    
    // Detect platform
    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
    const isAndroid = /Android/.test(navigator.userAgent);
    
    // App Store URLs
    const appStoreUrl = 'https://apps.apple.com/app/riddleme/idYOUR_APP_ID';
    const playStoreUrl = 'https://play.google.com/store/apps/details?id=com.riddleme.app';
    
    // Update message based on content type
    if (path.startsWith('/riddle/')) {
      document.getElementById('message').textContent = 'Opening riddle in app...';
    } else if (path.startsWith('/invite/')) {
      document.getElementById('message').textContent = 'Opening friend invite...';
    }
    
    // Set the open app button link
    document.getElementById('openApp').href = deepLink;
    
    // Try to open the app
    function tryOpenApp() {
      const start = Date.now();
      
      // Try to open the app
      window.location.href = deepLink;
      
      // After a delay, check if we're still on this page
      setTimeout(function() {
        // If still here after 2 seconds, app probably not installed
        if (Date.now() - start < 3000) {
          document.getElementById('loading').style.display = 'none';
          document.getElementById('buttons').style.display = 'block';
        }
      }, 2000);
    }
    
    // Fallback to store after timeout
    setTimeout(function() {
      document.getElementById('loading').style.display = 'none';
      document.getElementById('buttons').style.display = 'block';
    }, 3000);
    
    // Try to open app on load
    tryOpenApp();
  </script>
</body>
</html>
